# UnitModuleWorkshopModule

## Призначення
Відповідає за прокачку модулів юнітів: визначає доступність, вартість апгрейду та поточні бонуси.

## Залежності
- `DataBridge` — публікує стан майстерні (`unitModules/workshop`).
- `ResourcesModule` — списує ресурси за апгрейди.
- Функція `getSkillLevel` — перевіряє скіл `void_modules` (відкриває майстерню).
- `UnlockService` — контролює додаткові умови відкриття модулів.
- `unit-modules-db.ts` — опис бонусів, вартості та умов.

## Життєвий цикл
- `initialize()` — визначає доступні модулі, публікує стан і сповіщає підписників.
- `reset()` / `load(data)` — відновлюють рівні та оновлюють місток.

## Основні методи
- `tick(deltaMs)` — перевіряє нові умови розблокування, оновлює стан.
- `tryUpgradeModule(id)` — списує ресурси й підвищує рівень, якщо модуль видимий та розблокований.
- `getModuleLevel(id)` — повертає поточний рівень.
- `subscribe(listener)` — сповіщає про зміни (для UnitDesignModule).

## Збереження
- Зберігає рівні модулів у вигляді мапи `UnitModuleId → level` без нульових значень.

## Особливості
- Вартість кожного наступного рівня зростає вдвічі (через `Math.pow(2, level)`).
- Видимість модулів визначається як об'єднання відкритих умов і прокачаних модулів, щоб гравець не втрачав доступ до вже покращених.
