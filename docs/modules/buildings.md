# BuildingsModule

## Призначення
Керує майстернею будівель: відкриває доступ до покращень, нараховує бонуси та віднімає ресурси за апгрейди.

## Залежності
- `DataBridge` — публікує стан майстерні (`buildings/workshop`).
- `ResourcesModule` — перевіряє та списує ресурси.
- `BonusesModule` — реєструє джерела бонусів для кожної будівлі.
- `UnlockService` — перевіряє умови відкриття.
- Функція `getSkillLevel` — визначає, чи вивчено скіл `construction_guild`.

## Життєвий цикл
- `initialize()` — синхронізує бонуси, оновлює доступність, надсилає стан.
- `reset()` / `load(data)` — відновлюють рівні, оновлюють бонуси та доступність.

## Основні методи
- `tryUpgradeBuilding(id)` — перевіряє доступність, витрати та збільшує рівень. Повертає `true`, якщо апгрейд вдався.
- `getBuildingLevel(id)` — поточний рівень.
- `subscribe(listener)` — повідомляє UI про зміни (наприклад, для оновлення кнопок).

## Збереження
- Зберігає мапу рівнів будівель (без нульових значень) у сейві.

## Особливості
- Перераховує доступні будівлі при кожному тіку, щоб врахувати нові умови розблокування.
- Список будівель відфільтровано за відкритими умовами, але вже прокачані будівлі залишаються видимими навіть без умов.
