# Сервісний шар

## Визначення сервісів
Сервісний шар збирається з `ServiceDefinition` у `src/logic/definitions/`: бутстрап-сервіси та модулі описують свій токен, фабрику й опційні хуки (`registerAsModule`, `onReady`). `Application` створює типізований проксі `services`, тож новий модуль автоматично доступний як `app.services.<token>` без ручних геттерів.

## SaveManager
Зберігає дані модулів у `localStorage`. Кожен модуль реєструється, надаючи реалізації `save()` і `load(data)`. Менеджер обслуговує ручні сейви, перемикання слотів та автозбереження кожні 10 секунд.

## GameLoop
Таймер, що викликає `tick(deltaMs)` на зареєстрованих модулях з кроком 100 мс. Автоматично пропускає виклики, якщо `deltaMs` ≤ 0, і дозволяє ставити цикл на паузу.

## SceneObjectManager
Веде карту світу, камеру й пул об'єктів сцени, які читає WebGL-рендер. Основні методи:

- `addObject(type, config)` — додає рендер-об'єкт і повертає його id.
- `updateObject(id, patch)` — частково оновлює об'єкт.
- `removeObject(id)` — видаляє з пулу.
- `clear()` — очищує сцену (використовується при `reset`).
- `getMapSize()` — повертає розмір карти для клампінгу координат.

## UnlockService
Допоміжний сервіс, що перевіряє умови відкриття контенту (скили, будівлі, рецепти). Визначає, чи доступні ті чи інші гілки прогресу.

## MovementService
Інтегрує симуляцію фізики для юнітів: зберігає тіла, рахує рух до цілей, штовхає об'єкти з урахуванням маси та сил.
