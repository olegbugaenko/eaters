# Ядро рантайму

## ServiceContainer
Легковаговий реєстр сінглтонів. Відповідає за створення та зберігання сервісів за текстовим ключем. Модулі звертаються до `get<T>(key)`, щоб отримати залежність, не створюючи циклів імпортів. Дублікати блокуються методом `register`.

## Application
Координує життєвий цикл гри. У конструкторі створює `SaveManager`, `GameLoop`, `SceneObjectManager`, `MovementService` та реєструє всі модулі. Ключові методи:

- `initialize()` — послідовно викликає `initialize` на кожному модулі.
- `reset()` — очищує сцену, скидуючи стан модулів.
- `selectSlot(slot)` — перемикає сейв, перезавантажуючи дані й запускаючи цикл оновлень.
- `returnToMainMenu()` — зберігає поточний слот, зупиняє таймери та очищує сцену.
- `selectMap(mapId)` — делегує вибір карти `MapModule`.
- `getBridge()`, `getSceneObjects()`, `getGameLoop()`, `getSaveManager()` — віддають спільні сервіси для UI та тестів.

Реєстрація модулів відбувається через внутрішній хелпер, який одночасно підключає їх до `SaveManager` і `GameLoop`.

## DataBridge
Транспорт для реактивних даних між логікою та React. Модулі публікують значення через `setValue(key, value)`. Компоненти підписуються за допомогою `subscribe` й отримують початковий стан через `getValue`. Під капотом використовується `useSyncExternalStore`, тож оновлення безпечні для Concurrent Mode.
